<!-- build time:Fri Dec 27 2019 16:54:00 GMT+0800 (GMT+08:00) --><!DOCTYPE html><html class="theme-next mist" lang="zh-Hans"><head><meta name="google-site-verification" content="-YPbgjltFVFljoCm04Ktk0m38A8CkQxpifuKVZXtawA"><mate name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,minimum-scale=1.0,user-scalable=no"><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1"><meta name="theme-color" content="#222"><script src="/lib/pace/pace.min.js?v=1.0.2"></script><link href="/lib/pace/pace-theme-bounce.min.css?v=1.0.2" rel="stylesheet"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"><link href="https://fonts.loli.net/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css"><link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css"><link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4"><link rel="icon" type="image/png" sizes="32x32" href="/favicon.ico?v=5.1.4"><link rel="icon" type="image/png" sizes="16x16" href="/favicon.ico?v=5.1.4"><link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222"><meta name="keywords" content="æ‰©å±•è½¬è½½,"><link rel="alternate" href="/atom.xml" title="Sakuraçš„åšå®¢" type="application/atom+xml"><meta name="description" content="æœ¬æ–‡è½¬è½½è‡ªSanarousçš„github å¤§ä½¬åšå®¢ä¸€ã€ç¼“å­˜ç‰¹å¾å‘½ä¸­ç‡å½“æŸä¸ªè¯·æ±‚èƒ½å¤Ÿé€šè¿‡è®¿é—®ç¼“å­˜è€Œå¾—åˆ°å“åº”æ—¶ï¼Œç§°ä¸ºç¼“å­˜å‘½ä¸­ã€‚ç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜ï¼Œç¼“å­˜çš„åˆ©ç”¨ç‡ä¹Ÿå°±è¶Šé«˜ã€‚æœ€å¤§ç©ºé—´ç¼“å­˜é€šå¸¸ä½äºå†…å­˜ä¸­ï¼Œå†…å­˜çš„ç©ºé—´é€šå¸¸æ¯”ç£ç›˜ç©ºé—´å°çš„å¤šï¼Œå› æ­¤ç¼“å­˜çš„æœ€å¤§ç©ºé—´ä¸å¯èƒ½éå¸¸å¤§ã€‚å½“ç¼“å­˜å­˜æ”¾çš„æ•°æ®é‡è¶…è¿‡æœ€å¤§ç©ºé—´æ—¶ï¼Œå°±éœ€è¦æ·˜æ±°éƒ¨åˆ†æ•°æ®æ¥å­˜æ”¾æ–°åˆ°è¾¾çš„æ•°æ®ã€‚"><meta property="og:type" content="article"><meta property="og:title" content="ç¼“å­˜"><meta property="og:url" content="https:&#x2F;&#x2F;bbasakura.github.io&#x2F;posts&#x2F;2316692063.html"><meta property="og:site_name" content="Sakuraçš„åšå®¢"><meta property="og:description" content="æœ¬æ–‡è½¬è½½è‡ªSanarousçš„github å¤§ä½¬åšå®¢ä¸€ã€ç¼“å­˜ç‰¹å¾å‘½ä¸­ç‡å½“æŸä¸ªè¯·æ±‚èƒ½å¤Ÿé€šè¿‡è®¿é—®ç¼“å­˜è€Œå¾—åˆ°å“åº”æ—¶ï¼Œç§°ä¸ºç¼“å­˜å‘½ä¸­ã€‚ç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜ï¼Œç¼“å­˜çš„åˆ©ç”¨ç‡ä¹Ÿå°±è¶Šé«˜ã€‚æœ€å¤§ç©ºé—´ç¼“å­˜é€šå¸¸ä½äºå†…å­˜ä¸­ï¼Œå†…å­˜çš„ç©ºé—´é€šå¸¸æ¯”ç£ç›˜ç©ºé—´å°çš„å¤šï¼Œå› æ­¤ç¼“å­˜çš„æœ€å¤§ç©ºé—´ä¸å¯èƒ½éå¸¸å¤§ã€‚å½“ç¼“å­˜å­˜æ”¾çš„æ•°æ®é‡è¶…è¿‡æœ€å¤§ç©ºé—´æ—¶ï¼Œå°±éœ€è¦æ·˜æ±°éƒ¨åˆ†æ•°æ®æ¥å­˜æ”¾æ–°åˆ°è¾¾çš„æ•°æ®ã€‚"><meta property="article:published_time" content="2019-12-26T02:25:44.000Z"><meta property="article:modified_time" content="2019-12-26T02:26:59.959Z"><meta property="article:author" content="Sakura"><meta property="article:tag" content="æ‰©å±•è½¬è½½"><meta name="twitter:card" content="summary"><script type="text/javascript" id="hexo.configurations">var NexT=window.NexT||{},CONFIG={root:"/",scheme:"Mist",version:"5.1.4",sidebar:{position:"right",display:"hide",offset:12,b2t:!0,scrollpercent:!0,onmobile:!0},fancybox:!0,tabs:!0,motion:{enable:!1,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}},duoshuo:{userId:"0",author:"åšä¸»"},algolia:{applicationID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}}}</script><link rel="canonical" href="https://bbasakura.github.io/posts/2316692063.html"><title>ç¼“å­˜ - Sakuraçš„åšå®¢</title><script async src="https://www.googletagmanager.com/gtag/js?id=UA-139884627-1"></script><link rel="stylesheet" href="/dist/css/share.min.css"><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-139884627-1")</script><script>var _hmt=_hmt||[];!function(){var e=document.createElement("script");e.src="https://hm.baidu.com/hm.js?9d4a3700a4e6444240fe13acb69c87fc";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t)}()</script><meta name="generator" content="Hexo 4.1.1"></head><body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans"><div class="container sidebar-position-right page-post-detail"><div class="headband"></div><a href="https://github.com/bbasakura" target="_blank" rel="noopener" class="github-corner" aria-label="View source on GitHub"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#64CEAA;color:#fff;position:absolute;top:0;border:0;right:0" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin:130px 106px" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a><style>.github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}</style><header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-wrapper"><div class="site-meta"><div class="custom-logo-site-title"><a href="/" class="brand" rel="start"><span class="site-title">Sakuraçš„åšå®¢</span></a></div><h1 class="site-subtitle" itemprop="description"></h1></div><div class="site-nav-toggle"><button><span class="btn-bar"></span> <span class="btn-bar"></span> <span class="btn-bar"></span></button></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i><br>é¦–é¡µ</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i><br>å½’æ¡£</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i><br>åˆ†ç±»</a></li><li class="menu-item menu-item-about"><a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i><br>åšä¸»</a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="menu-item-icon fa fa-fw fa-user-plus"></i><br>å‹é“¾</a></li><li class="menu-item menu-item-search"><a href="javascript:;" class="popup-trigger"><i class="menu-item-icon fa fa-search fa-fw"></i><br>æœç´¢</a></li></ul><div class="site-search"><div class="popup search-popup local-search-popup"><div class="local-search-header clearfix"><span class="search-icon"><i class="fa fa-search"></i> </span><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span><div class="local-search-input-wrapper"><input autocomplete="off" placeholder="æœç´¢..." spellcheck="false" type="text" id="local-search-input"></div></div><div id="local-search-result"></div></div></div></nav></div></header><main id="main" class="main"><div class="main-inner"><div class="content-wrap"><div id="content" class="content"><div id="posts" class="posts-expand"><article class="post post-type-normal" itemscope itemtype="http://schema.org/Article"><div class="post-block"><link itemprop="mainEntityOfPage" href="https://bbasakura.github.io/posts/2316692063.html"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="name" content="Sakura"><meta itemprop="description" content=""><meta itemprop="image" content="/images/touxiang.jpeg"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Sakuraçš„åšå®¢"></span><header class="post-header"><h2 class="post-title" itemprop="name headline">ç¼“å­˜</h2><div class="post-meta"><span class="post-time"><span class="post-meta-item-icon"><font color="blue"><i class="fa fa-calendar"></i></font> </span><span class="post-meta-item-text">å‘è¡¨äº</span> <time title="åˆ›å»ºäº" itemprop="dateCreated datePublished" datetime="2019-12-26T10:25:44+08:00"><font color="blue">2019-12-26</font> </time></span><span class="post-category"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><font color="#56b6e7"><i class="fa fa-folder-open"></i></font> </span><span class="post-meta-item-text">åˆ†ç±»äº</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%89%A9%E5%B1%95%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><font color="#56b6e7"><span itemprop="name">æ‰©å±•çŸ¥è¯†</span></font> </a></span></span><span id="/posts/2316692063.html" class="leancloud_visitors" data-flag-title="ç¼“å­˜"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><font color="red"><i class="fa fa-eye"></i></font> </span><span class="post-meta-item-text">çƒ­åº¦&#58;</span> <font color="red"><span class="leancloud-visitors-count"></span> <span>â„ƒ</span></font></span><div class="post-wordcount"><span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><font color="green"><i class="fa fa-file-word-o"></i></font> </span><span class="post-meta-item-text">å­—æ•°&#58;</span> <font color="green"><span title="å­—æ•°">2.7k </span></font><span class="post-meta-divider">|</span><span class="post-meta-item-icon"><font color="#333"><i class="fa fa-clock-o"></i></font> </span><span class="post-meta-item-text">é˜…è¯»æ—¶é•¿ &asymp;</span> <span title="é˜…è¯»æ—¶é•¿">10</span></div></div></header><div class="post-body" itemprop="articleBody"><p><a href="https://github.com/Sanarous" target="_blank" rel="noopener">æœ¬æ–‡è½¬è½½è‡ªSanarousçš„github</a> <a href="https://bestzuo.cn/" target="_blank" rel="noopener">å¤§ä½¬åšå®¢</a></p><h1 id="ä¸€ã€ç¼“å­˜ç‰¹å¾"><a href="#ä¸€ã€ç¼“å­˜ç‰¹å¾" class="headerlink" title="ä¸€ã€ç¼“å­˜ç‰¹å¾"></a>ä¸€ã€ç¼“å­˜ç‰¹å¾</h1><h2 id="å‘½ä¸­ç‡"><a href="#å‘½ä¸­ç‡" class="headerlink" title="å‘½ä¸­ç‡"></a>å‘½ä¸­ç‡</h2><p>å½“æŸä¸ªè¯·æ±‚èƒ½å¤Ÿé€šè¿‡è®¿é—®ç¼“å­˜è€Œå¾—åˆ°å“åº”æ—¶ï¼Œç§°ä¸ºç¼“å­˜å‘½ä¸­ã€‚</p><p>ç¼“å­˜å‘½ä¸­ç‡è¶Šé«˜ï¼Œç¼“å­˜çš„åˆ©ç”¨ç‡ä¹Ÿå°±è¶Šé«˜ã€‚</p><h2 id="æœ€å¤§ç©ºé—´"><a href="#æœ€å¤§ç©ºé—´" class="headerlink" title="æœ€å¤§ç©ºé—´"></a>æœ€å¤§ç©ºé—´</h2><p>ç¼“å­˜é€šå¸¸ä½äºå†…å­˜ä¸­ï¼Œå†…å­˜çš„ç©ºé—´é€šå¸¸æ¯”ç£ç›˜ç©ºé—´å°çš„å¤šï¼Œå› æ­¤ç¼“å­˜çš„æœ€å¤§ç©ºé—´ä¸å¯èƒ½éå¸¸å¤§ã€‚</p><p>å½“ç¼“å­˜å­˜æ”¾çš„æ•°æ®é‡è¶…è¿‡æœ€å¤§ç©ºé—´æ—¶ï¼Œå°±éœ€è¦æ·˜æ±°éƒ¨åˆ†æ•°æ®æ¥å­˜æ”¾æ–°åˆ°è¾¾çš„æ•°æ®ã€‚</p><a id="more"></a><h2 id="æ·˜æ±°ç­–ç•¥"><a href="#æ·˜æ±°ç­–ç•¥" class="headerlink" title="æ·˜æ±°ç­–ç•¥"></a>æ·˜æ±°ç­–ç•¥</h2><ul><li>FIFOï¼ˆFirst In First Outï¼‰ï¼šå…ˆè¿›å…ˆå‡ºç­–ç•¥ï¼Œåœ¨å®æ—¶æ€§çš„åœºæ™¯ä¸‹ï¼Œéœ€è¦ç»å¸¸è®¿é—®æœ€æ–°çš„æ•°æ®ï¼Œé‚£ä¹ˆå°±å¯ä»¥ä½¿ç”¨ FIFOï¼Œä½¿å¾—æœ€å…ˆè¿›å…¥çš„æ•°æ®ï¼ˆæœ€æ™šçš„æ•°æ®ï¼‰è¢«æ·˜æ±°ã€‚</li><li>LRUï¼ˆLeast Recently Usedï¼‰ï¼šæœ€è¿‘æœ€ä¹…æœªä½¿ç”¨ç­–ç•¥ï¼Œä¼˜å…ˆæ·˜æ±°æœ€ä¹…æœªä½¿ç”¨çš„æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ä¸Šæ¬¡è¢«è®¿é—®æ—¶é—´è·ç¦»ç°åœ¨æœ€ä¹…çš„æ•°æ®ã€‚è¯¥ç­–ç•¥å¯ä»¥ä¿è¯å†…å­˜ä¸­çš„æ•°æ®éƒ½æ˜¯çƒ­ç‚¹æ•°æ®ï¼Œä¹Ÿå°±æ˜¯ç»å¸¸è¢«è®¿é—®çš„æ•°æ®ï¼Œä»è€Œä¿è¯ç¼“å­˜å‘½ä¸­ç‡ã€‚</li><li>LFUï¼ˆLeast Frequently Usedï¼‰ï¼šæœ€ä¸ç»å¸¸ä½¿ç”¨ç­–ç•¥ï¼Œä¼˜å…ˆæ·˜æ±°ä¸€æ®µæ—¶é—´å†…ä½¿ç”¨æ¬¡æ•°æœ€å°‘çš„æ•°æ®ã€‚</li></ul><h1 id="äºŒã€LRU"><a href="#äºŒã€LRU" class="headerlink" title="äºŒã€LRU"></a>äºŒã€LRU</h1><p>ä»¥ä¸‹æ˜¯åŸºäº åŒå‘é“¾è¡¨ + HashMap çš„ LRU ç®—æ³•å®ç°ï¼Œå¯¹ç®—æ³•çš„è§£é‡Šå¦‚ä¸‹ï¼š</p><ul><li>è®¿é—®æŸä¸ªèŠ‚ç‚¹æ—¶ï¼Œå°†å…¶ä»åŸæ¥çš„ä½ç½®åˆ é™¤ï¼Œå¹¶é‡æ–°æ’å…¥åˆ°é“¾è¡¨å¤´éƒ¨ã€‚è¿™æ ·å°±èƒ½ä¿è¯é“¾è¡¨å°¾éƒ¨å­˜å‚¨çš„å°±æ˜¯æœ€è¿‘æœ€ä¹…æœªä½¿ç”¨çš„èŠ‚ç‚¹ï¼Œå½“èŠ‚ç‚¹æ•°é‡å¤§äºç¼“å­˜æœ€å¤§ç©ºé—´æ—¶å°±æ·˜æ±°é“¾è¡¨å°¾éƒ¨çš„èŠ‚ç‚¹ã€‚</li><li>ä¸ºäº†ä½¿åˆ é™¤æ“ä½œæ—¶é—´å¤æ‚åº¦ä¸º O(1)ï¼Œå°±ä¸èƒ½é‡‡ç”¨éå†çš„æ–¹å¼æ‰¾åˆ°æŸä¸ªèŠ‚ç‚¹ã€‚HashMap å­˜å‚¨ç€ Key åˆ°èŠ‚ç‚¹çš„æ˜ å°„ï¼Œé€šè¿‡ Key å°±èƒ½ä»¥ O(1) çš„æ—¶é—´å¾—åˆ°èŠ‚ç‚¹ï¼Œç„¶åå†ä»¥ O(1) çš„æ—¶é—´å°†å…¶ä»åŒå‘é˜Ÿåˆ—ä¸­åˆ é™¤ã€‚</li></ul><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LRU</span>&lt;<span class="title">K</span>, <span class="title">V</span>&gt; <span class="keyword">implements</span> <span class="title">Iterable</span>&lt;<span class="title">K</span>&gt; </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> Node head;</span><br><span class="line">    <span class="keyword">private</span> Node tail;</span><br><span class="line">    <span class="keyword">private</span> HashMap&lt;K, Node&gt; map;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> maxSize;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="class"><span class="keyword">class</span> <span class="title">Node</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Node pre;</span><br><span class="line">        Node next;</span><br><span class="line">        K k;</span><br><span class="line">        V v;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Node</span><span class="params">(K k, V v)</span> </span>&#123;</span><br><span class="line">            <span class="keyword">this</span>.k = k;</span><br><span class="line">            <span class="keyword">this</span>.v = v;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">LRU</span><span class="params">(<span class="keyword">int</span> maxSize)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.maxSize = maxSize;</span><br><span class="line">        <span class="keyword">this</span>.map = <span class="keyword">new</span> HashMap&lt;&gt;(maxSize * <span class="number">4</span> / <span class="number">3</span>);</span><br><span class="line"></span><br><span class="line">        head = <span class="keyword">new</span> Node(<span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line">        tail = <span class="keyword">new</span> Node(<span class="keyword">null</span>, <span class="keyword">null</span>);</span><br><span class="line"></span><br><span class="line">        head.next = tail;</span><br><span class="line">        tail.pre = head;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> V <span class="title">get</span><span class="params">(K key)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (!map.containsKey(key)) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node node = map.get(key);</span><br><span class="line">        unlink(node);</span><br><span class="line">        appendHead(node);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node.v;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">put</span><span class="params">(K key, V value)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (map.containsKey(key)) &#123;</span><br><span class="line">            Node node = map.get(key);</span><br><span class="line">            unlink(node);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Node node = <span class="keyword">new</span> Node(key, value);</span><br><span class="line">        map.put(key, node);</span><br><span class="line">        appendHead(node);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span> (map.size() &gt; maxSize) &#123;</span><br><span class="line">            Node toRemove = removeTail();</span><br><span class="line">            map.remove(toRemove.k);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">unlink</span><span class="params">(Node node)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Node pre = node.pre;</span><br><span class="line">        Node next = node.next;</span><br><span class="line"></span><br><span class="line">        pre.next = next;</span><br><span class="line">        next.pre = pre;</span><br><span class="line"></span><br><span class="line">        node.pre = <span class="keyword">null</span>;</span><br><span class="line">        node.next = <span class="keyword">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">appendHead</span><span class="params">(Node node)</span> </span>&#123;</span><br><span class="line">        Node next = head.next;</span><br><span class="line">        node.next = next;</span><br><span class="line">        next.pre = node;</span><br><span class="line">        node.pre = head;</span><br><span class="line">        head.next = node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> Node <span class="title">removeTail</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        Node node = tail.pre;</span><br><span class="line"></span><br><span class="line">        Node pre = node.pre;</span><br><span class="line">        tail.pre = pre;</span><br><span class="line">        pre.next = tail;</span><br><span class="line"></span><br><span class="line">        node.pre = <span class="keyword">null</span>;</span><br><span class="line">        node.next = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> node;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> Iterator&lt;K&gt; <span class="title">iterator</span><span class="params">()</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> Iterator&lt;K&gt;() &#123;</span><br><span class="line">            <span class="keyword">private</span> Node cur = head.next;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">hasNext</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                <span class="keyword">return</span> cur != tail;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> K <span class="title">next</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                Node node = cur;</span><br><span class="line">                cur = cur.next;</span><br><span class="line">                <span class="keyword">return</span> node.k;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="ä¸‰ã€ç¼“å­˜ä½ç½®"><a href="#ä¸‰ã€ç¼“å­˜ä½ç½®" class="headerlink" title="ä¸‰ã€ç¼“å­˜ä½ç½®"></a>ä¸‰ã€ç¼“å­˜ä½ç½®</h1><h2 id="æµè§ˆå™¨"><a href="#æµè§ˆå™¨" class="headerlink" title="æµè§ˆå™¨"></a>æµè§ˆå™¨</h2><p>å½“ HTTP å“åº”å…è®¸è¿›è¡Œç¼“å­˜æ—¶ï¼Œæµè§ˆå™¨ä¼šå°† HTMLã€CSSã€JavaScriptã€å›¾ç‰‡ç­‰é™æ€èµ„æºè¿›è¡Œç¼“å­˜ã€‚</p><h2 id="ISP"><a href="#ISP" class="headerlink" title="ISP"></a>ISP</h2><p>ç½‘ç»œæœåŠ¡æä¾›å•†ï¼ˆISPï¼‰æ˜¯ç½‘ç»œè®¿é—®çš„ç¬¬ä¸€è·³ï¼Œé€šè¿‡å°†æ•°æ®ç¼“å­˜åœ¨ ISP ä¸­èƒ½å¤Ÿå¤§å¤§æé«˜ç”¨æˆ·çš„è®¿é—®é€Ÿåº¦ã€‚</p><h2 id="åå‘ä»£ç†"><a href="#åå‘ä»£ç†" class="headerlink" title="åå‘ä»£ç†"></a>åå‘ä»£ç†</h2><p>åå‘ä»£ç†ä½äºæœåŠ¡å™¨ä¹‹å‰ï¼Œè¯·æ±‚ä¸å“åº”éƒ½éœ€è¦ç»è¿‡åå‘ä»£ç†ã€‚é€šè¿‡å°†æ•°æ®ç¼“å­˜åœ¨åå‘ä»£ç†ï¼Œåœ¨ç”¨æˆ·è¯·æ±‚åå‘ä»£ç†æ—¶å°±å¯ä»¥ç›´æ¥ä½¿ç”¨ç¼“å­˜è¿›è¡Œå“åº”ã€‚</p><h2 id="æœ¬åœ°ç¼“å­˜"><a href="#æœ¬åœ°ç¼“å­˜" class="headerlink" title="æœ¬åœ°ç¼“å­˜"></a>æœ¬åœ°ç¼“å­˜</h2><p>ä½¿ç”¨ Guava Cache å°†æ•°æ®ç¼“å­˜åœ¨æœåŠ¡å™¨æœ¬åœ°å†…å­˜ä¸­ï¼ŒæœåŠ¡å™¨ä»£ç å¯ä»¥ç›´æ¥è¯»å–æœ¬åœ°å†…å­˜ä¸­çš„ç¼“å­˜ï¼Œé€Ÿåº¦éå¸¸å¿«ã€‚</p><h2 id="åˆ†å¸ƒå¼ç¼“å­˜"><a href="#åˆ†å¸ƒå¼ç¼“å­˜" class="headerlink" title="åˆ†å¸ƒå¼ç¼“å­˜"></a>åˆ†å¸ƒå¼ç¼“å­˜</h2><p>ä½¿ç”¨ Redisã€Memcache ç­‰åˆ†å¸ƒå¼ç¼“å­˜å°†æ•°æ®ç¼“å­˜åœ¨åˆ†å¸ƒå¼ç¼“å­˜ç³»ç»Ÿä¸­ã€‚</p><p>ç›¸å¯¹äºæœ¬åœ°ç¼“å­˜æ¥è¯´ï¼Œåˆ†å¸ƒå¼ç¼“å­˜å•ç‹¬éƒ¨ç½²ï¼Œå¯ä»¥æ ¹æ®éœ€æ±‚åˆ†é…ç¡¬ä»¶èµ„æºã€‚ä¸ä»…å¦‚æ­¤ï¼ŒæœåŠ¡å™¨é›†ç¾¤éƒ½å¯ä»¥è®¿é—®åˆ†å¸ƒå¼ç¼“å­˜ï¼Œè€Œæœ¬åœ°ç¼“å­˜éœ€è¦åœ¨æœåŠ¡å™¨é›†ç¾¤ä¹‹é—´è¿›è¡ŒåŒæ­¥ï¼Œå®ç°éš¾åº¦å’Œæ€§èƒ½å¼€é”€ä¸Šéƒ½éå¸¸å¤§ã€‚</p><h2 id="æ•°æ®åº“ç¼“å­˜"><a href="#æ•°æ®åº“ç¼“å­˜" class="headerlink" title="æ•°æ®åº“ç¼“å­˜"></a>æ•°æ®åº“ç¼“å­˜</h2><p>MySQL ç­‰æ•°æ®åº“ç®¡ç†ç³»ç»Ÿå…·æœ‰è‡ªå·±çš„æŸ¥è¯¢ç¼“å­˜æœºåˆ¶æ¥æé«˜æŸ¥è¯¢æ•ˆç‡ã€‚</p><h2 id="Java-å†…éƒ¨çš„ç¼“å­˜"><a href="#Java-å†…éƒ¨çš„ç¼“å­˜" class="headerlink" title="Java å†…éƒ¨çš„ç¼“å­˜"></a>Java å†…éƒ¨çš„ç¼“å­˜</h2><p>Java ä¸ºäº†ä¼˜åŒ–ç©ºé—´ï¼Œæé«˜å­—ç¬¦ä¸²ã€åŸºæœ¬æ•°æ®ç±»å‹åŒ…è£…ç±»çš„åˆ›å»ºæ•ˆç‡ï¼Œè®¾è®¡äº†å­—ç¬¦ä¸²å¸¸é‡æ± åŠ Byteã€Shortã€Characterã€Integerã€Longã€Boolean è¿™å…­ç§åŒ…è£…ç±»ç¼“å†²æ± ã€‚</p><h2 id="CPU-å¤šçº§ç¼“å­˜"><a href="#CPU-å¤šçº§ç¼“å­˜" class="headerlink" title="CPU å¤šçº§ç¼“å­˜"></a>CPU å¤šçº§ç¼“å­˜</h2><p>CPU ä¸ºäº†è§£å†³è¿ç®—é€Ÿåº¦ä¸ä¸»å­˜ IO é€Ÿåº¦ä¸åŒ¹é…çš„é—®é¢˜ï¼Œå¼•å…¥äº†å¤šçº§ç¼“å­˜ç»“æ„ï¼ŒåŒæ—¶ä½¿ç”¨ MESI ç­‰ç¼“å­˜ä¸€è‡´æ€§åè®®æ¥è§£å†³å¤šæ ¸ CPU ç¼“å­˜æ•°æ®ä¸€è‡´æ€§çš„é—®é¢˜ã€‚</p><h1 id="å››ã€CDN"><a href="#å››ã€CDN" class="headerlink" title="å››ã€CDN"></a>å››ã€CDN</h1><p>å†…å®¹åˆ†å‘ç½‘ç»œï¼ˆContent distribution networkï¼ŒCDNï¼‰æ˜¯ä¸€ç§äº’è¿çš„ç½‘ç»œç³»ç»Ÿï¼Œå®ƒåˆ©ç”¨æ›´é è¿‘ç”¨æˆ·çš„æœåŠ¡å™¨ä»è€Œæ›´å¿«æ›´å¯é åœ°å°† HTMLã€CSSã€JavaScriptã€éŸ³ä¹ã€å›¾ç‰‡ã€è§†é¢‘ç­‰é™æ€èµ„æºåˆ†å‘ç»™ç”¨æˆ·ã€‚</p><p>CDN ä¸»è¦æœ‰ä»¥ä¸‹ä¼˜ç‚¹ï¼š</p><ul><li>æ›´å¿«åœ°å°†æ•°æ®åˆ†å‘ç»™ç”¨æˆ·ï¼›</li><li>é€šè¿‡éƒ¨ç½²å¤šå°æœåŠ¡å™¨ï¼Œä»è€Œæé«˜ç³»ç»Ÿæ•´ä½“çš„å¸¦å®½æ€§èƒ½ï¼›</li><li>å¤šå°æœåŠ¡å™¨å¯ä»¥çœ‹æˆæ˜¯ä¸€ç§å†—ä½™æœºåˆ¶ï¼Œä»è€Œå…·æœ‰é«˜å¯ç”¨æ€§ã€‚</li></ul><h1 id="äº”ã€ç¼“å­˜é—®é¢˜"><a href="#äº”ã€ç¼“å­˜é—®é¢˜" class="headerlink" title="äº”ã€ç¼“å­˜é—®é¢˜"></a>äº”ã€ç¼“å­˜é—®é¢˜</h1><h2 id="ç¼“å­˜ç©¿é€"><a href="#ç¼“å­˜ç©¿é€" class="headerlink" title="ç¼“å­˜ç©¿é€"></a>ç¼“å­˜ç©¿é€</h2><p>æŒ‡çš„æ˜¯å¯¹æŸä¸ªä¸€å®šä¸å­˜åœ¨çš„æ•°æ®è¿›è¡Œè¯·æ±‚ï¼Œè¯¥è¯·æ±‚å°†ä¼šç©¿é€ç¼“å­˜åˆ°è¾¾æ•°æ®åº“ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>å¯¹è¿™äº›ä¸å­˜åœ¨çš„æ•°æ®ç¼“å­˜ä¸€ä¸ªç©ºæ•°æ®ï¼›</li><li>å¯¹è¿™ç±»è¯·æ±‚è¿›è¡Œè¿‡æ»¤ã€‚</li></ul><h2 id="ç¼“å­˜é›ªå´©"><a href="#ç¼“å­˜é›ªå´©" class="headerlink" title="ç¼“å­˜é›ªå´©"></a>ç¼“å­˜é›ªå´©</h2><p>æŒ‡çš„æ˜¯ç”±äºæ•°æ®æ²¡æœ‰è¢«åŠ è½½åˆ°ç¼“å­˜ä¸­ï¼Œæˆ–è€…ç¼“å­˜æ•°æ®åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯å¤±æ•ˆï¼ˆè¿‡æœŸï¼‰ï¼Œåˆæˆ–è€…ç¼“å­˜æœåŠ¡å™¨å®•æœºï¼Œå¯¼è‡´å¤§é‡çš„è¯·æ±‚éƒ½åˆ°è¾¾æ•°æ®åº“ã€‚</p><p>åœ¨æœ‰ç¼“å­˜çš„ç³»ç»Ÿä¸­ï¼Œç³»ç»Ÿéå¸¸ä¾èµ–äºç¼“å­˜ï¼Œç¼“å­˜åˆ†æ‹…äº†å¾ˆå¤§ä¸€éƒ¨åˆ†çš„æ•°æ®è¯·æ±‚ã€‚å½“å‘ç”Ÿç¼“å­˜é›ªå´©æ—¶ï¼Œæ•°æ®åº“æ— æ³•å¤„ç†è¿™ä¹ˆå¤§çš„è¯·æ±‚ï¼Œå¯¼è‡´æ•°æ®åº“å´©æºƒã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>ä¸ºäº†é˜²æ­¢ç¼“å­˜åœ¨åŒä¸€æ—¶é—´å¤§é¢ç§¯è¿‡æœŸå¯¼è‡´çš„ç¼“å­˜é›ªå´©ï¼Œå¯ä»¥é€šè¿‡è§‚å¯Ÿç”¨æˆ·è¡Œä¸ºï¼Œåˆç†è®¾ç½®ç¼“å­˜è¿‡æœŸæ—¶é—´æ¥å®ç°ï¼›</li><li>ä¸ºäº†é˜²æ­¢ç¼“å­˜æœåŠ¡å™¨å®•æœºå‡ºç°çš„ç¼“å­˜é›ªå´©ï¼Œå¯ä»¥ä½¿ç”¨åˆ†å¸ƒå¼ç¼“å­˜ï¼Œåˆ†å¸ƒå¼ç¼“å­˜ä¸­æ¯ä¸€ä¸ªèŠ‚ç‚¹åªç¼“å­˜éƒ¨åˆ†çš„æ•°æ®ï¼Œå½“æŸä¸ªèŠ‚ç‚¹å®•æœºæ—¶å¯ä»¥ä¿è¯å…¶å®ƒèŠ‚ç‚¹çš„ç¼“å­˜ä»ç„¶å¯ç”¨ã€‚</li><li>ä¹Ÿå¯ä»¥è¿›è¡Œç¼“å­˜é¢„çƒ­ï¼Œé¿å…åœ¨ç³»ç»Ÿåˆšå¯åŠ¨ä¸ä¹…ç”±äºè¿˜æœªå°†å¤§é‡æ•°æ®è¿›è¡Œç¼“å­˜è€Œå¯¼è‡´ç¼“å­˜é›ªå´©ã€‚</li></ul><h2 id="ç¼“å­˜ä¸€è‡´æ€§"><a href="#ç¼“å­˜ä¸€è‡´æ€§" class="headerlink" title="ç¼“å­˜ä¸€è‡´æ€§"></a>ç¼“å­˜ä¸€è‡´æ€§</h2><p>ç¼“å­˜ä¸€è‡´æ€§è¦æ±‚æ•°æ®æ›´æ–°çš„åŒæ—¶ç¼“å­˜æ•°æ®ä¹Ÿèƒ½å¤Ÿå®æ—¶æ›´æ–°ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>åœ¨æ•°æ®æ›´æ–°çš„åŒæ—¶ç«‹å³å»æ›´æ–°ç¼“å­˜ï¼›</li><li>åœ¨è¯»ç¼“å­˜ä¹‹å‰å…ˆåˆ¤æ–­ç¼“å­˜æ˜¯å¦æ˜¯æœ€æ–°çš„ï¼Œå¦‚æœä¸æ˜¯æœ€æ–°çš„å…ˆè¿›è¡Œæ›´æ–°ã€‚</li></ul><p>è¦ä¿è¯ç¼“å­˜ä¸€è‡´æ€§éœ€è¦ä»˜å‡ºå¾ˆå¤§çš„ä»£ä»·ï¼Œç¼“å­˜æ•°æ®æœ€å¥½æ˜¯é‚£äº›å¯¹ä¸€è‡´æ€§è¦æ±‚ä¸é«˜çš„æ•°æ®ï¼Œå…è®¸ç¼“å­˜æ•°æ®å­˜åœ¨ä¸€äº›è„æ•°æ®ã€‚</p><h2 id="ç¼“å­˜-â€œæ— åº•æ´â€-ç°è±¡"><a href="#ç¼“å­˜-â€œæ— åº•æ´â€-ç°è±¡" class="headerlink" title="ç¼“å­˜ â€œæ— åº•æ´â€ ç°è±¡"></a>ç¼“å­˜ â€œæ— åº•æ´â€ ç°è±¡</h2><p>æŒ‡çš„æ˜¯ä¸ºäº†æ»¡è¶³ä¸šåŠ¡è¦æ±‚æ·»åŠ äº†å¤§é‡ç¼“å­˜èŠ‚ç‚¹ï¼Œä½†æ˜¯æ€§èƒ½ä¸ä½†æ²¡æœ‰å¥½è½¬åè€Œä¸‹é™äº†çš„ç°è±¡ã€‚</p><p>äº§ç”ŸåŸå› ï¼šç¼“å­˜ç³»ç»Ÿé€šå¸¸é‡‡ç”¨ hash å‡½æ•°å°† key æ˜ å°„åˆ°å¯¹åº”çš„ç¼“å­˜èŠ‚ç‚¹ï¼Œéšç€ç¼“å­˜èŠ‚ç‚¹æ•°ç›®çš„å¢åŠ ï¼Œé”®å€¼åˆ†å¸ƒåˆ°æ›´å¤šçš„èŠ‚ç‚¹ä¸Šï¼Œå¯¼è‡´å®¢æˆ·ç«¯ä¸€æ¬¡æ‰¹é‡æ“ä½œä¼šæ¶‰åŠå¤šæ¬¡ç½‘ç»œæ“ä½œï¼Œè¿™æ„å‘³ç€æ‰¹é‡æ“ä½œçš„è€—æ—¶ä¼šéšç€èŠ‚ç‚¹æ•°ç›®çš„å¢åŠ è€Œä¸æ–­å¢å¤§ã€‚æ­¤å¤–ï¼Œç½‘ç»œè¿æ¥æ•°å˜å¤šï¼Œå¯¹èŠ‚ç‚¹çš„æ€§èƒ½ä¹Ÿæœ‰ä¸€å®šå½±å“ã€‚</p><p>è§£å†³æ–¹æ¡ˆï¼š</p><ul><li>ä¼˜åŒ–æ‰¹é‡æ•°æ®æ“ä½œå‘½ä»¤ï¼›</li><li>å‡å°‘ç½‘ç»œé€šä¿¡æ¬¡æ•°ï¼›</li><li>é™ä½æ¥å…¥æˆæœ¬ï¼Œä½¿ç”¨é•¿è¿æ¥ / è¿æ¥æ± ï¼ŒNIO ç­‰ã€‚</li></ul><h1 id="å…­ã€æ•°æ®åˆ†å¸ƒ"><a href="#å…­ã€æ•°æ®åˆ†å¸ƒ" class="headerlink" title="å…­ã€æ•°æ®åˆ†å¸ƒ"></a>å…­ã€æ•°æ®åˆ†å¸ƒ</h1><h2 id="å“ˆå¸Œåˆ†å¸ƒ"><a href="#å“ˆå¸Œåˆ†å¸ƒ" class="headerlink" title="å“ˆå¸Œåˆ†å¸ƒ"></a>å“ˆå¸Œåˆ†å¸ƒ</h2><p>å“ˆå¸Œåˆ†å¸ƒå°±æ˜¯å°†æ•°æ®è®¡ç®—å“ˆå¸Œå€¼ä¹‹åï¼ŒæŒ‰ç…§å“ˆå¸Œå€¼åˆ†é…åˆ°ä¸åŒçš„èŠ‚ç‚¹ä¸Šã€‚ä¾‹å¦‚æœ‰ N ä¸ªèŠ‚ç‚¹ï¼Œæ•°æ®çš„ä¸»é”®ä¸º keyï¼Œåˆ™å°†è¯¥æ•°æ®åˆ†é…çš„èŠ‚ç‚¹åºå·ä¸ºï¼šhash(key)%Nã€‚</p><p>ä¼ ç»Ÿçš„å“ˆå¸Œåˆ†å¸ƒç®—æ³•å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå½“èŠ‚ç‚¹æ•°é‡å˜åŒ–æ—¶ï¼Œä¹Ÿå°±æ˜¯ N å€¼å˜åŒ–ï¼Œé‚£ä¹ˆå‡ ä¹æ‰€æœ‰çš„æ•°æ®éƒ½éœ€è¦é‡æ–°åˆ†å¸ƒï¼Œå°†å¯¼è‡´å¤§é‡çš„æ•°æ®è¿ç§»ã€‚</p><h2 id="é¡ºåºåˆ†å¸ƒ"><a href="#é¡ºåºåˆ†å¸ƒ" class="headerlink" title="é¡ºåºåˆ†å¸ƒ"></a>é¡ºåºåˆ†å¸ƒ</h2><p>å°†æ•°æ®åˆ’åˆ†ä¸ºå¤šä¸ªè¿ç»­çš„éƒ¨åˆ†ï¼ŒæŒ‰æ•°æ®çš„ ID æˆ–è€…æ—¶é—´åˆ†å¸ƒåˆ°ä¸åŒèŠ‚ç‚¹ä¸Šã€‚ä¾‹å¦‚ User è¡¨çš„ ID èŒƒå›´ä¸º 1 ~ 7000ï¼Œä½¿ç”¨é¡ºåºåˆ†å¸ƒå¯ä»¥å°†å…¶åˆ’åˆ†æˆå¤šä¸ªå­è¡¨ï¼Œå¯¹åº”çš„ä¸»é”®èŒƒå›´ä¸º 1 ~ 1000ï¼Œ1001 ~ 2000ï¼Œâ€¦ï¼Œ6001 ~ 7000ã€‚</p><p>é¡ºåºåˆ†å¸ƒç›¸æ¯”äºå“ˆå¸Œåˆ†å¸ƒçš„ä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹ï¼š</p><ul><li>èƒ½ä¿æŒæ•°æ®åŸæœ‰çš„é¡ºåºï¼›</li><li>å¹¶ä¸”èƒ½å¤Ÿå‡†ç¡®æ§åˆ¶æ¯å°æœåŠ¡å™¨å­˜å‚¨çš„æ•°æ®é‡ï¼Œä»è€Œä½¿å¾—å­˜å‚¨ç©ºé—´çš„åˆ©ç”¨ç‡æœ€å¤§ã€‚</li></ul><h1 id="ä¸ƒã€ä¸€è‡´æ€§å“ˆå¸Œ"><a href="#ä¸ƒã€ä¸€è‡´æ€§å“ˆå¸Œ" class="headerlink" title="ä¸ƒã€ä¸€è‡´æ€§å“ˆå¸Œ"></a>ä¸ƒã€ä¸€è‡´æ€§å“ˆå¸Œ</h1><p>Distributed Hash Tableï¼ˆDHTï¼‰ æ˜¯ä¸€ç§å“ˆå¸Œåˆ†å¸ƒæ–¹å¼ï¼Œå…¶ç›®çš„æ˜¯ä¸ºäº†å…‹æœä¼ ç»Ÿå“ˆå¸Œåˆ†å¸ƒåœ¨æœåŠ¡å™¨èŠ‚ç‚¹æ•°é‡å˜åŒ–æ—¶å¤§é‡æ•°æ®è¿ç§»çš„é—®é¢˜ã€‚</p><h2 id="åŸºæœ¬åŸç†"><a href="#åŸºæœ¬åŸç†" class="headerlink" title="åŸºæœ¬åŸç†"></a>åŸºæœ¬åŸç†</h2><p>å°†å“ˆå¸Œç©ºé—´ [0, 2<sup>n</sup>-1] çœ‹æˆä¸€ä¸ªå“ˆå¸Œç¯ï¼Œæ¯ä¸ªæœåŠ¡å™¨èŠ‚ç‚¹éƒ½é…ç½®åˆ°å“ˆå¸Œç¯ä¸Šã€‚æ¯ä¸ªæ•°æ®å¯¹è±¡é€šè¿‡å“ˆå¸Œå–æ¨¡å¾—åˆ°å“ˆå¸Œå€¼ä¹‹åï¼Œå­˜æ”¾åˆ°å“ˆå¸Œç¯ä¸­é¡ºæ—¶é’ˆæ–¹å‘ç¬¬ä¸€ä¸ªå¤§äºç­‰äºè¯¥å“ˆå¸Œå€¼çš„èŠ‚ç‚¹ä¸Šã€‚</p><p>ä¸€è‡´æ€§å“ˆå¸Œåœ¨å¢åŠ æˆ–è€…åˆ é™¤èŠ‚ç‚¹æ—¶åªä¼šå½±å“åˆ°å“ˆå¸Œç¯ä¸­ç›¸é‚»çš„èŠ‚ç‚¹ï¼Œä¾‹å¦‚ä¸‹å›¾ä¸­æ–°å¢èŠ‚ç‚¹ Xï¼Œåªéœ€è¦å°†å®ƒå‰ä¸€ä¸ªèŠ‚ç‚¹ C ä¸Šçš„æ•°æ®é‡æ–°è¿›è¡Œåˆ†å¸ƒå³å¯ï¼Œå¯¹äºèŠ‚ç‚¹ Aã€Bã€D éƒ½æ²¡æœ‰å½±å“ã€‚</p><h2 id="è™šæ‹ŸèŠ‚ç‚¹"><a href="#è™šæ‹ŸèŠ‚ç‚¹" class="headerlink" title="è™šæ‹ŸèŠ‚ç‚¹"></a>è™šæ‹ŸèŠ‚ç‚¹</h2><p>ä¸Šé¢æè¿°çš„ä¸€è‡´æ€§å“ˆå¸Œå­˜åœ¨æ•°æ®åˆ†å¸ƒä¸å‡åŒ€çš„é—®é¢˜ï¼ŒèŠ‚ç‚¹å­˜å‚¨çš„æ•°æ®é‡æœ‰å¯èƒ½ä¼šå­˜åœ¨å¾ˆå¤§çš„ä¸åŒã€‚</p><p>æ•°æ®ä¸å‡åŒ€ä¸»è¦æ˜¯å› ä¸ºèŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šåˆ†å¸ƒçš„ä¸å‡åŒ€ï¼Œè¿™ç§æƒ…å†µåœ¨èŠ‚ç‚¹æ•°é‡å¾ˆå°‘çš„æƒ…å†µä¸‹å°¤å…¶æ˜æ˜¾ã€‚</p><p>è§£å†³æ–¹å¼æ˜¯é€šè¿‡å¢åŠ è™šæ‹ŸèŠ‚ç‚¹ï¼Œç„¶åå°†è™šæ‹ŸèŠ‚ç‚¹æ˜ å°„åˆ°çœŸå®èŠ‚ç‚¹ä¸Šã€‚è™šæ‹ŸèŠ‚ç‚¹çš„æ•°é‡æ¯”çœŸå®èŠ‚ç‚¹æ¥å¾—å¤šï¼Œé‚£ä¹ˆè™šæ‹ŸèŠ‚ç‚¹åœ¨å“ˆå¸Œç¯ä¸Šåˆ†å¸ƒçš„å‡åŒ€æ€§å°±ä¼šæ¯”åŸæ¥çš„çœŸå®èŠ‚ç‚¹å¥½ï¼Œä»è€Œä½¿å¾—æ•°æ®åˆ†å¸ƒä¹Ÿæ›´åŠ å‡åŒ€ã€‚</p><h1 id="å‚è€ƒèµ„æ–™"><a href="#å‚è€ƒèµ„æ–™" class="headerlink" title="å‚è€ƒèµ„æ–™"></a>å‚è€ƒèµ„æ–™</h1><ul><li>å¤§è§„æ¨¡åˆ†å¸ƒå¼å­˜å‚¨ç³»ç»Ÿ</li><li><a href="https://tech.meituan.com/cache_about.html" target="_blank" rel="noopener">ç¼“å­˜é‚£äº›äº‹</a></li><li><a href="https://my.oschina.net/jayhu/blog/732849" target="_blank" rel="noopener">ä¸€è‡´æ€§å“ˆå¸Œç®—æ³•</a></li><li><a href="https://zh.wikipedia.org/wiki/%E5%85%A7%E5%AE%B9%E5%82%B3%E9%81%9E%E7%B6%B2%E8%B7%AF" target="_blank" rel="noopener">å†…å®¹åˆ†å‘ç½‘ç»œ</a></li><li><a href="https://www.aspirationhosting.com/aspiration-cdn/" target="_blank" rel="noopener">How Aspiration CDN helps to improve your website loading speed?</a></li></ul></div><div class="popular-posts-header">ç›¸å…³æ–‡ç« æ¨è</div><ul class="popular-posts"><div class="popular-posts-item"><div class="popular-posts-title"><a href="\posts\3336378626.html" rel="bookmark">ğŸ·ï¸&nbsp;&nbsp;&nbsp;&nbsp;çŸ­é“¾æ¥æœåŠ¡ç³»ç»Ÿ</a></div></div></ul><style type="text/css">a:hover{text-decoration:none}</style><div><div><div style="margin-top:30px;text-align:center;color:#ccc;font-size:14px">-------------ã€€ã€€ã€€ã€€æœ¬æ–‡ç»“æŸã€€<i class="fa fa-heart"></i>ã€€æ„Ÿè°¢æ‚¨çš„é˜…è¯»ã€€ã€€ã€€ã€€-------------</div></div></div><footer class="post-footer"><div class="post-tags"><a href="/tags/%E6%89%A9%E5%B1%95%E8%BD%AC%E8%BD%BD/" rel="tag"><i class="fa fa-tag"></i> æ‰©å±•è½¬è½½</a></div><div class="post-nav"><div class="post-nav-next post-nav-item"><a href="/posts/3460397296.html" rel="prev" title="Topké—®é¢˜"><i class="fa fa-chevron-left"></i> Topké—®é¢˜</a></div><span class="post-nav-divider"></span><div class="post-nav-prev post-nav-item"><a href="/posts/734210201.html" rel="next" title="javaä¹‹è¯»å†™é”">javaä¹‹è¯»å†™é” <i class="fa fa-chevron-right"></i></a></div></div></footer></div></article><div class="post-spread"><div data-weibo-title="åˆ†äº«åˆ°å¾®åš" data-qq-title="åˆ†äº«åˆ°QQ" data-douban-title="åˆ†äº«åˆ°è±†ç“£" class="social-share" class="share-component" data-disabled="twitter,facebook" data-description="Share.js - ä¸€é”®åˆ†äº«åˆ°å¾®åšï¼ŒQQç©ºé—´ï¼Œè…¾è®¯å¾®åšï¼Œäººäººï¼Œè±†ç“£">åˆ†äº«åˆ°ï¼š</div></div></div></div><div class="sidebar-toggle"><div class="sidebar-toggle-line-wrap"><span class="sidebar-toggle-line sidebar-toggle-line-first"></span> <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span> <span class="sidebar-toggle-line sidebar-toggle-line-last"></span></div></div><aside id="sidebar" class="sidebar"><div id="sidebar-dimmer"></div><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">æ–‡ç« ç›®å½•</li><li class="sidebar-nav-overview" data-target="site-overview-wrap">ç«™ç‚¹æ¦‚è§ˆ</li></ul><section class="site-overview-wrap sidebar-panel"><div class="site-overview"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="site-author-image" itemprop="image" src="/images/touxiang.jpeg" alt="Sakura"><p class="site-author-name" itemprop="name">Sakura</p><p class="site-description motion-element" itemprop="description"></p></div><nav class="site-state motion-element"><div class="site-state-item site-state-posts"><a href="/archives/%7C%7C%20archive"><span class="site-state-item-count">53</span> <span class="site-state-item-name">æ—¥å¿—</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/index.html"><span class="site-state-item-count">11</span> <span class="site-state-item-name">åˆ†ç±»</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/index.html"><span class="site-state-item-count">12</span> <span class="site-state-item-name">æ ‡ç­¾</span></a></div></nav><div class="feed-link motion-element"><a href="/atom.xml" rel="alternate"><i class="fa fa-rss"></i> RSS</a></div><div class="links-of-author motion-element"><span class="links-of-author-item"><a href="https://github.com/bbasakura" target="_blank" title="Github"><i class="fa fa-fw fa-github"></i>Github</a> </span><span class="links-of-author-item"><a href="https://plus.google.com/" target="_blank" title="Google"><i class="fa fa-fw fa-google"></i>Google</a> </span><span class="links-of-author-item"><a href="https://stackoverflow.com/" target="_blank" title="StackOverflow"><i class="fa fa-fw fa-stack-overflow"></i>StackOverflow</a></span></div><div class="links-of-blogroll motion-element links-of-blogroll-inline"><div class="links-of-blogroll-title"><i class="fa fa-fw fa-link"></i> å¤–é“¾</div><ul class="links-of-blogroll-list"><li class="links-of-blogroll-item"><a href="https://www.baidu.com/" title="Baidu" target="_blank">Baidu</a></li><li class="links-of-blogroll-item"><a href="https://github.com/" title="Github" target="_blank">Github</a></li><li class="links-of-blogroll-item"><a href="https://reuixiy.github.io/" title="Hexoå¤§ä½¬1" target="_blank">Hexoå¤§ä½¬1</a></li><li class="links-of-blogroll-item"><a href="https://www.52share.online" title="åœ¨çº¿åˆ†äº«ç½‘" target="_blank">åœ¨çº¿åˆ†äº«ç½‘</a></li><li class="links-of-blogroll-item"><a href="https://bestzuo.cn" title="Hexoå¤§ä½¬2" target="_blank">Hexoå¤§ä½¬2</a></li></ul><div id="days"></div><script>function show_date_time(){window.setTimeout("show_date_time()",1e3),BirthDay=new Date("12/19/2019 18:25:14"),today=new Date,timeold=today.getTime()-BirthDay.getTime(),sectimeold=timeold/1e3,secondsold=Math.floor(sectimeold),msPerDay=864e5,e_daysold=timeold/msPerDay,daysold=Math.floor(e_daysold),e_hrsold=24*(e_daysold-daysold),hrsold=setzero(Math.floor(e_hrsold)),e_minsold=60*(e_hrsold-hrsold),minsold=setzero(Math.floor(60*(e_hrsold-hrsold))),seconds=setzero(Math.floor(60*(e_minsold-minsold))),document.getElementById("days").innerHTML="å·²è¿è¡Œ "+daysold+" å¤© "+hrsold+" å°æ—¶ "+minsold+" åˆ† "+seconds+" ç§’"}function setzero(e){return e<10&&(e="0"+e),e}show_date_time()</script></div></div></section><section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active"><div class="post-toc"><div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸€ã€ç¼“å­˜ç‰¹å¾"><span class="nav-number">1.</span> <span class="nav-text">ä¸€ã€ç¼“å­˜ç‰¹å¾</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å‘½ä¸­ç‡"><span class="nav-number">1.1.</span> <span class="nav-text">å‘½ä¸­ç‡</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æœ€å¤§ç©ºé—´"><span class="nav-number">1.2.</span> <span class="nav-text">æœ€å¤§ç©ºé—´</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ·˜æ±°ç­–ç•¥"><span class="nav-number">1.3.</span> <span class="nav-text">æ·˜æ±°ç­–ç•¥</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#äºŒã€LRU"><span class="nav-number">2.</span> <span class="nav-text">äºŒã€LRU</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸‰ã€ç¼“å­˜ä½ç½®"><span class="nav-number">3.</span> <span class="nav-text">ä¸‰ã€ç¼“å­˜ä½ç½®</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#æµè§ˆå™¨"><span class="nav-number">3.1.</span> <span class="nav-text">æµè§ˆå™¨</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ISP"><span class="nav-number">3.2.</span> <span class="nav-text">ISP</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åå‘ä»£ç†"><span class="nav-number">3.3.</span> <span class="nav-text">åå‘ä»£ç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æœ¬åœ°ç¼“å­˜"><span class="nav-number">3.4.</span> <span class="nav-text">æœ¬åœ°ç¼“å­˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#åˆ†å¸ƒå¼ç¼“å­˜"><span class="nav-number">3.5.</span> <span class="nav-text">åˆ†å¸ƒå¼ç¼“å­˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#æ•°æ®åº“ç¼“å­˜"><span class="nav-number">3.6.</span> <span class="nav-text">æ•°æ®åº“ç¼“å­˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Java-å†…éƒ¨çš„ç¼“å­˜"><span class="nav-number">3.7.</span> <span class="nav-text">Java å†…éƒ¨çš„ç¼“å­˜</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CPU-å¤šçº§ç¼“å­˜"><span class="nav-number">3.8.</span> <span class="nav-text">CPU å¤šçº§ç¼“å­˜</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å››ã€CDN"><span class="nav-number">4.</span> <span class="nav-text">å››ã€CDN</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#äº”ã€ç¼“å­˜é—®é¢˜"><span class="nav-number">5.</span> <span class="nav-text">äº”ã€ç¼“å­˜é—®é¢˜</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#ç¼“å­˜ç©¿é€"><span class="nav-number">5.1.</span> <span class="nav-text">ç¼“å­˜ç©¿é€</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç¼“å­˜é›ªå´©"><span class="nav-number">5.2.</span> <span class="nav-text">ç¼“å­˜é›ªå´©</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç¼“å­˜ä¸€è‡´æ€§"><span class="nav-number">5.3.</span> <span class="nav-text">ç¼“å­˜ä¸€è‡´æ€§</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ç¼“å­˜-â€œæ— åº•æ´â€-ç°è±¡"><span class="nav-number">5.4.</span> <span class="nav-text">ç¼“å­˜ â€œæ— åº•æ´â€ ç°è±¡</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å…­ã€æ•°æ®åˆ†å¸ƒ"><span class="nav-number">6.</span> <span class="nav-text">å…­ã€æ•°æ®åˆ†å¸ƒ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#å“ˆå¸Œåˆ†å¸ƒ"><span class="nav-number">6.1.</span> <span class="nav-text">å“ˆå¸Œåˆ†å¸ƒ</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#é¡ºåºåˆ†å¸ƒ"><span class="nav-number">6.2.</span> <span class="nav-text">é¡ºåºåˆ†å¸ƒ</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#ä¸ƒã€ä¸€è‡´æ€§å“ˆå¸Œ"><span class="nav-number">7.</span> <span class="nav-text">ä¸ƒã€ä¸€è‡´æ€§å“ˆå¸Œ</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#åŸºæœ¬åŸç†"><span class="nav-number">7.1.</span> <span class="nav-text">åŸºæœ¬åŸç†</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#è™šæ‹ŸèŠ‚ç‚¹"><span class="nav-number">7.2.</span> <span class="nav-text">è™šæ‹ŸèŠ‚ç‚¹</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#å‚è€ƒèµ„æ–™"><span class="nav-number">8.</span> <span class="nav-text">å‚è€ƒèµ„æ–™</span></a></li></ol></div></div></section><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span id="scrollpercent"><span>0</span>%</span></div></div></aside></div></div></main><footer id="footer" class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2019</span> <span class="with-love" id="heart"><font color="red"><i class="fa fa-heartbeat" aria-hidden="true"></i></font> </span><span class="author" itemprop="copyrightHolder">Sakura</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="fa fa-area-chart"></i> </span><span class="post-meta-item-text">å…¨ç«™æ€»å­—æ•°&#58;</span> <span title="å…¨ç«™æ€»å­—æ•°">244.7k</span></div><div style="width:300px;margin:0 auto;padding:0 0"></div><div class="busuanzi-count"><script async src="/js/src/busuanzi.pure.mini.js"></script><span class="site-uv"><i class="fa fa-user">&nbsp;è®¿å®¢é‡:</i> <span class="busuanzi-value" id="busuanzi_value_site_uv"></span> </span><span class="site-pv"><i class="fa fa-eye">&nbsp;è®¿é—®é‡:</i> <span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></div></footer></div><script type="text/javascript">"[object Function]"!==Object.prototype.toString.call(window.Promise)&&(window.Promise=null)</script><script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script><script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script><script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script><script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script><script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script><script type="text/javascript" src="/lib/canvas-nest/canvas-nest.min.js"></script><script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/post-details.js?v=5.1.4"></script><script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script><script type="text/javascript">function proceedsearch(){$("body").append('<div class="search-popup-overlay local-search-pop-overlay"></div>').css("overflow","hidden"),$(".search-popup-overlay").click(onPopupClose),$(".popup").toggle();var t=$("#local-search-input");t.attr("autocapitalize","none"),t.attr("autocorrect","off"),t.focus()}var isfetched=!1,isXml=!0,search_path="search.xml";0===search_path.length?search_path="search.xml":/json$/i.test(search_path)&&(isXml=!1);var path="/"+search_path,onPopupClose=function(t){$(".popup").hide(),$("#local-search-input").val(""),$(".search-result-list").remove(),$("#no-result").remove(),$(".local-search-pop-overlay").remove(),$("body").css("overflow","")},searchFunc=function(t,e,o){"use strict";$("body").append('<div class="search-popup-overlay local-search-pop-overlay"><div id="search-loading-icon"><i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i></div></div>').css("overflow","hidden"),$("#search-loading-icon").css("margin","20% auto 0 auto").css("text-align","center"),$.ajax({url:t,dataType:isXml?"xml":"json",async:!0,success:function(t){isfetched=!0,$(".popup").detach().appendTo(".header-inner");var n=isXml?$("entry",t).map(function(){return{title:$("title",this).text(),content:$("content",this).text(),url:$("url",this).text()}}).get():t,r=document.getElementById(e),s=document.getElementById(o),a=function(){var t=r.value.trim().toLowerCase(),e=t.split(/[\s\-]+/);e.length>1&&e.push(t);var o=[];if(t.length>0&&n.forEach(function(n){function r(e,o,n,r){for(var s=r[r.length-1],a=s.position,i=s.word,l=[],h=0;a+i.length<=n&&0!=r.length;){i===t&&h++,l.push({position:a,length:i.length});var p=a+i.length;for(r.pop();0!=r.length&&(s=r[r.length-1],a=s.position,i=s.word,p>a);)r.pop()}return c+=h,{hits:l,start:o,end:n,searchTextCount:h}}function s(t,e){var o="",n=e.start;return e.hits.forEach(function(e){o+=t.substring(n,e.position);var r=e.position+e.length;o+='<b class="search-keyword">'+t.substring(e.position,r)+"</b>",n=r}),o+=t.substring(n,e.end)}var a=!1,i=0,c=0,l=n.title.trim(),h=l.toLowerCase(),p=n.content.trim().replace(/<[^>]+>/g,""),u=p.toLowerCase(),f=decodeURIComponent(n.url),d=[],g=[];if(""!=l&&(e.forEach(function(t){function e(t,e,o){var n=t.length;if(0===n)return[];var r=0,s=[],a=[];for(o||(e=e.toLowerCase(),t=t.toLowerCase());(s=e.indexOf(t,r))>-1;)a.push({position:s,word:t}),r=s+n;return a}d=d.concat(e(t,h,!1)),g=g.concat(e(t,u,!1))}),(d.length>0||g.length>0)&&(a=!0,i=d.length+g.length)),a){[d,g].forEach(function(t){t.sort(function(t,e){return e.position!==t.position?e.position-t.position:t.word.length-e.word.length})});var v=[];0!=d.length&&v.push(r(l,0,l.length,d));for(var $=[];0!=g.length;){var C=g[g.length-1],m=C.position,x=C.word,w=m-20,y=m+80;w<0&&(w=0),y<m+x.length&&(y=m+x.length),y>p.length&&(y=p.length),$.push(r(p,w,y,g))}$.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hits.length!==e.hits.length?e.hits.length-t.hits.length:t.start-e.start});var T=parseInt("1");T>=0&&($=$.slice(0,T));var b="";b+=0!=v.length?"<li><a href='"+f+"' class='search-result-title'>"+s(l,v[0])+"</a>":"<li><a href='"+f+"' class='search-result-title'>"+l+"</a>",$.forEach(function(t){b+="<a href='"+f+'\'><p class="search-result">'+s(p,t)+"...</p></a>"}),b+="</li>",o.push({item:b,searchTextCount:c,hitCount:i,id:o.length})}}),1===e.length&&""===e[0])s.innerHTML='<div id="no-result"><i class="fa fa-search fa-5x" /></div>';else if(0===o.length)s.innerHTML='<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>';else{o.sort(function(t,e){return t.searchTextCount!==e.searchTextCount?e.searchTextCount-t.searchTextCount:t.hitCount!==e.hitCount?e.hitCount-t.hitCount:e.id-t.id});var a='<ul class="search-result-list">';o.forEach(function(t){a+=t.item}),a+="</ul>",s.innerHTML=a}};r.addEventListener("input",a),$(".local-search-pop-overlay").remove(),$("body").css("overflow",""),proceedsearch()}})};$(".popup-trigger").click(function(t){t.stopPropagation(),isfetched===!1?searchFunc(path,"local-search-input","local-search-result"):proceedsearch()}),$(".popup-btn-close").click(onPopupClose),$(".popup").click(function(t){t.stopPropagation()}),$(document).on("keyup",function(t){var e=27===t.which&&$(".search-popup").is(":visible");e&&onPopupClose()})</script><script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.4.js"></script><script>AV.initialize("","")</script><script>function showTime(e){var t=new AV.Query(e),n=[],o=$(".leancloud_visitors");o.each(function(){n.push($(this).attr("id").trim())}),t.containedIn("url",n),t.find().done(function(e){var t=".leancloud-visitors-count";if(0===e.length)return void o.find(t).text(0);for(var i=0;i<e.length;i++){var r=e[i],s=r.get("url"),l=r.get("time"),c=document.getElementById(s);$(c).find(t).text(l)}for(var i=0;i<n.length;i++){var s=n[i],c=document.getElementById(s),u=$(c).find(t);""==u.text()&&u.text(0)}}).fail(function(e,t){console.log("Error: "+t.code+" "+t.message)})}function addCount(e){var t=$(".leancloud_visitors"),n=t.attr("id").trim(),o=t.attr("data-flag-title").trim(),i=new AV.Query(e);i.equalTo("url",n),i.find({success:function(t){if(t.length>0){var i=t[0];i.fetchWhenSave(!0),i.increment("time"),i.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to save Visitor num, with error message: "+t.message)}})}else{var r=new e,s=new AV.ACL;s.setPublicReadAccess(!0),s.setPublicWriteAccess(!0),r.setACL(s),r.set("title",o),r.set("url",n),r.set("time",1),r.save(null,{success:function(e){var t=$(document.getElementById(n));t.find(".leancloud-visitors-count").text(e.get("time"))},error:function(e,t){console.log("Failed to create")}})}},error:function(e){console.log("Error:"+e.code+" "+e.message)}})}$(function(){var e=AV.Object.extend("Counter");1==$(".leancloud_visitors").length?addCount(e):$(".post-title-link").length>1&&showTime(e)})</script><script>!function(){var t=document.createElement("script"),s=window.location.protocol.split(":")[0];"https"===s?t.src="https://zz.bdstatic.com/linksubmit/push.js":t.src="http://push.zhanzhang.baidu.com/push.js";var e=document.getElementsByTagName("script")[0];e.parentNode.insertBefore(t,e)}()</script><script>$(".highlight").each(function(t,e){var n=$("<div>").addClass("highlight-wrap");$(e).after(n),n.append($("<button>").addClass("copy-btn").append("å¤åˆ¶").on("click",function(t){var e=$(this).parent().find(".code").find(".line").map(function(t,e){return $(e).text()}).toArray().join("\n"),n=document.createElement("textarea"),o=window.pageYOffset||document.documentElement.scrollTop;n.style.top=o+"px",n.style.position="absolute",n.style.opacity="0",n.readOnly=!0,n.value=e,document.body.appendChild(n),n.select(),n.setSelectionRange(0,e.length),n.readOnly=!1;var a=document.execCommand("copy");a?$(this).text("å¤åˆ¶æˆåŠŸ"):$(this).text("å¤åˆ¶å¤±è´¥"),n.blur(),$(this).blur()})).on("mouseleave",function(t){var e=$(this).find(".copy-btn");setTimeout(function(){e.text("å¤åˆ¶")},300)}).append(e)})</script><script type="text/javascript" src="/js/src/linkcard.js"></script><script type="text/javascript" src="/js/src/love.js"></script><script src="/dist/js/social-share.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-backstretch/2.0.4/jquery.backstretch.min.js"></script><script type="text/javascript" src="/js/src/clicklove.js"></script><script><script type="text/javascript" src="/js/src/image.js"></script><script type="text/javascript" src="/js/src/dytitle.js"></script><script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({pluginRootPath:"live2dw/",pluginJsPath:"lib/",pluginModelPath:"assets/",tagMode:!1,debug:!1,model:{scale:1,jsonPath:"/live2dw/assets/wanko.model.json"},display:{superSample:2,width:100,height:100,position:"left"},mobile:{show:!1},react:{opacityDefault:.9,opacityOnHover:.5},log:!1})</script></body></html><!-- rebuild by neat -->